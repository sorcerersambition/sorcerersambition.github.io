{"version":3,"sources":["webpack:///webpack/bootstrap ed162f02963b96c0397a","webpack:///./active/dungeon/scripts/index.js","webpack:///./active/dungeon/scripts/drawing/shapes.js","webpack:///./active/dungeon/scripts/utilities/keypress.js","webpack:///./active/dungeon/scripts/misc/spell.js","webpack:///./active/dungeon/scripts/misc/enemy.js","webpack:///./active/dungeon/scripts/misc/player.js","webpack:///./active/dungeon/scripts/misc/encounter.js","webpack:///./active/dungeon/scripts/utilities/fps.js","webpack:///./active/dungeon/scripts/misc/statbar.js","webpack:///./active/dungeon/scripts/utilities/animate.js"],"names":["window","worlds","split","map","arr","val","world","key","listen","g","app","PIXI","Application","backgroundColor","antialias","stage","loader","add","load","fonts","WebFont","custom","families","urls","active","console","log","setup","document","body","appendChild","view","build","wrld","Container","barriers","battle","enemies","addChild","player","tall","sort","a","b","y","forEach","removeChild","bg","i","j","tile","Sprite","resources","texture","anchor","x","coord","length","wall","rectangle","fire","scale","push","sprite","stair","slime","firerat","zig","pure","loop","move","children","indexOf","valid","stop","start","render","module","exports","renderer","canvas","width","height","createElement","ctx","getContext","color","fillStyle","fillRect","Texture","fromCanvas","circle","radius","beginPath","arc","Math","PI","fill","tethers","onkeydown","e","event","which","keyCode","tether","index","type","func","perma","splice","onkeyup","check","callback","not","undefined","waitUp","waitDown","strictless","every","runeMap","name","runes","effect","duration","amount","cost","anim","animFrames","scroll","floor","random","started","addEventListener","spell","scrollContainer","cast","lock","rune","Text","fontFamily","fontSize","cb","end","quinter","enemy","style","health","attack","big","small","bigTex","smallTex","maxHealth","counter","mode","maxMana","mana","spells","p","t","testcheck","round","playerHealth","playerMana","enemyHealth","obj","slashes","casting","spellContainer","animate","turn","addFrame","spl","spellHold","text","wordWrap","wordWrapWidth","buttonMode","interactive","on","ceil","initiate","slash","addAsync","alpha","timer","child","awaitEnter","dialogue","txt","dialogueList","wrapper","tick","going","requestAnimationFrame","draw","resume","pause","toggle","restart","ct","fills","max","starts","shades","bodys","ends","Frame","progress","animation","frames","shift","async"],"mappings":"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","file":"active/dungeon/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ed162f02963b96c0397a","//Create a Pixi Application\r\nimport shapes from \"./drawing/shapes.js\";\r\nimport key from \"./utilities/keypress.js\";\r\nimport Spell from \"./misc/spell.js\";\r\nimport Enemy from \"./misc/enemy.js\";\r\nimport Player from \"./misc/player.js\";\r\nimport Encounter from \"./misc/encounter.js\";\r\nimport fps from \"./utilities/fps.js\";\r\nwindow.worlds = [`11111111\r\n1p000001\r\n10000001\r\n10000001\r\n10000z01\r\n10000011\r\n100000s1\r\n11111111`.split(\"\\n\"),\r\n`11111111\r\n1p010001\r\n10e1e1e1\r\n100001s1\r\n11111111`.split(\"\\n\"),\r\n`111111111\r\n1p0rF0s1\r\n11111111`.split(\"\\n\"),\r\n`1111111111111111111111111111\r\n1p00000000000000000000000001\r\n1eee00rrr0000000000000rrr001\r\n1e00e0r000000e000e0000r0r001\r\n1e00e0rrr000ee00e0e000r0r001\r\n1e00e0r0000e0e0e000e00r0r001\r\n1eee00rrr0e00ee00000e0rrr001\r\n1111111111111111111111111111`.split(\"\\n\")\r\n];\r\nworlds = worlds.map(function(arr){return arr.map(function(val){\r\n    return val.split(\"\");\r\n  })\r\n})\r\nwindow.world = window.worlds[0];\r\nwindow.key = key;\r\nkey.listen()\r\nwindow.g = {};\r\nwindow.app = new PIXI.Application(702, 576, {\r\n  backgroundColor: 0x000000,\r\n  antialias:true\r\n});\r\nwindow.stage = app.stage;\r\n\r\n/*\r\n<3<3<3\r\nflashback to sensitive rectangle moving along grid\r\nproud parents\r\n- artist + dev\r\nfor(let i = 0; i < 18;i++){\r\n  let gridline = new PIXI.Sprite(shapes.rectangle(1,640,\"#000000\"));\r\n  gridline.x = i * 64;\r\n  map.addChild(gridline)\r\n\r\n}\r\nfor(let i = 0; i < 18;i++){\r\n  let gridline = new PIXI.Sprite(shapes.rectangle(768,1,\"#000000\"));\r\n  gridline.y = i * 64;\r\n  map.addChild(gridline)\r\n\r\n}*/\r\nPIXI.loader\r\n.add(\"./assets/hpblue.png\")\r\n.add(\"./assets/firerat.png\")\r\n.add(\"./assets/fireratbig.png\")\r\n.add(\"./assets/dialoguebox.png\")\r\n.add(\"./assets/gold.png\")\r\n.add(\"./assets/stair.png\")\r\n.add(\"./assets/zeegas.png\") \r\n.add(\"./assets/slash/1.png\") \r\n.add(\"./assets/slash/2.png\") \r\n.add(\"./assets/slash/3.png\") \r\n.add(\"./assets/slash/4.png\") \r\n.add(\"./assets/slash/5.png\") \r\n.add(\"./assets/slash/6.png\") \r\n.add(\"./assets/slash/7.png\") \r\n.add(\"./assets/slash/8.png\") \r\n.add(\"./assets/slash/9.png\") \r\n.add(\"./assets/slash/10.png\") \r\n.add(\"./assets/slash/11.png\") \r\n.add(\"./assets/slash/12.png\") \r\n.add(\"./assets/slash/13.png\")\r\n.add(\"./assets/slash/14.png\")  \r\n.add(\"./assets/flame/1.png\") \r\n.add(\"./assets/flame/2.png\") \r\n.add(\"./assets/flame/3.png\") \r\n.add(\"./assets/flame/4.png\") \r\n.add(\"./assets/flame/5.png\") \r\n.add(\"./assets/flame/6.png\") \r\n.add(\"./assets/flame/7.png\") \r\n.add(\"./assets/flame/8.png\") \r\n.add(\"./assets/flame/9.png\") \r\n.add(\"./assets/flame/10.png\") \r\n.add(\"./assets/flame/11.png\") \r\n.add(\"./assets/flame/12.png\") \r\n.add(\"./assets/flame/13.png\")\r\n.add(\"./assets/flame/14.png\")  \r\n.add(\"./assets/flame/15.png\")\r\n.add(\"./assets/water/1.png\") \r\n.add(\"./assets/water/2.png\") \r\n.add(\"./assets/water/3.png\") \r\n.add(\"./assets/water/4.png\") \r\n.add(\"./assets/water/5.png\") \r\n.add(\"./assets/water/6.png\") \r\n.add(\"./assets/water/7.png\")   \r\n.add(\"./assets/slimebig.png\") \r\n.add(\"./assets/evstart.png\")\r\n.add(\"./assets/evbodyfill.png\")\r\n.add(\"./assets/evbody.png\")\r\n.add(\"./assets/evend.png\")\r\n.add(\"./assets/mpbodyfill.png\")\r\n.add(\"./assets/mpstart.png\")\r\n.add(\"./assets/hpbodyfill.png\")\r\n.add(\"./assets/hpstart.png\")\r\n.add(\"./assets/goldend.png\")\r\n.add(\"./assets/goldbody.png\")\r\n.add(\"./assets/tile.png\")\r\n.add(\"./assets/slime.png\")\r\n.add(\"./assets/qg.png\")\r\n.add(\"./assets/qw.png\")\r\n.add(\"./assets/ag.png\")\r\n.add(\"./assets/aw.png\")\r\n.add(\"./assets/steve.png\")\r\n.add(\"./assets/steve-2.png\")\r\n.add(\"./assets/menu.png\")\r\n.add(\"./assets/runes/A.png\")\r\n.add(\"./assets/runes/F.png\")\r\n.add(\"./assets/runes/Q.png\")\r\n.add(\"./assets/runes/R.png\")\r\n.add(\"./assets/runes/W.png\")\r\n.add(\"./assets/steve-stand.png\").load(fonts);\r\n\r\nfunction fonts() {\r\n  WebFont.load({\r\n      custom: {\r\n          families: ['Mono'],\r\n          urls: [\"stylesheet.css\"]\r\n      },\r\n      active: e => {\r\n          console.log(\"font loaded!\");\r\n          // now start setting up your PixiJS (or canvas) stuff!\r\n          setup()\r\n      }\r\n  })\r\n}\r\ndocument.body.appendChild(app.view);\r\nfunction setup() {\r\n  function build(wrld){\r\n    window.map = new PIXI.Container();\r\n  window.barriers = [];\r\n  window.battle = new PIXI.Container();\r\n  window.enemies = [];\r\n  stage.addChild(window.map)\r\n  let barriers = new PIXI.Container();\r\n  map.addChild(barriers);\r\n  world = wrld;\r\n  window.player = new Player();\r\n      window.tall = [];\r\n    window.tall.sort(function(a,b){\r\n      return a.y-b.y\r\n    })\r\n    window.tall.forEach(function(val){\r\n      map.removeChild(val)\r\n      map.addChild(val)\r\n    })\r\n  function bg(i,j){\r\n    let tile = new PIXI.Sprite(PIXI.loader.resources[\"./assets/tile.png\"].texture)\r\n    tile.anchor.x = 0.5;\r\n    tile.x = j*64 + 32 + 1;\r\n    tile.y = i*64;\r\n    tile.coord = {\"x\":i,\"y\":j};\r\n    barriers.addChild(tile);\r\n  }\r\n  for(let i = 0;i< wrld.length;i++){\r\n    for(let j =0;j<wrld[i].length;j++){\r\n      if(wrld[i][j] === \"1\"){\r\n        let wall = new PIXI.Sprite(shapes.rectangle(64,64,\"#000\"))\r\n        wall.anchor.x = 0.5;\r\n        wall.x = j*64 + 32 + 1;\r\n        wall.y = i*64;\r\n        wall.coord = {\"x\":i,\"y\":j};\r\n        barriers.addChild(wall);\r\n      }\r\n      if(wrld[i][j] === \"F\"){\r\n        bg(i,j)\r\n        let fire = new PIXI.Sprite(PIXI.loader.resources[\"./assets/runes/F.png\"].texture)\r\n        fire.anchor.x = 0.5;\r\n        fire.scale.x = 0.25;\r\n        fire.scale.y = 0.25;\r\n        fire.x = j*64 + 32 + 1;\r\n        fire.y = i*64;\r\n        fire.coord = {\"x\":i,\"y\":j};\r\n        barriers.addChild(fire);\r\n      }\r\n      if(wrld[i][j] === \"0\"){\r\n        bg(i,j)\r\n      }\r\n      if(wrld[i][j] === \"p\"){\r\n        map.x -= j * 64 - 351;\r\n        map.y -= i * 64 - 576/2;\r\n        player.x += j * 64 - 351 +32;\r\n        player.y += i * 64 - 576/2 - 32;\r\n        player.coord.x = j;\r\n        player.coord.y = i;\r\n        tall.push(player.sprite);\r\n        bg(i,j)\r\n      }\r\n      if(wrld[i][j] === \"s\"){\r\n        let stair = new PIXI.Sprite(PIXI.loader.resources[\"./assets/stair.png\"].texture)\r\n        stair.anchor.x = 0.5;\r\n        stair.x = j*64 + 32 + 1;\r\n        stair.y = i*64;\r\n        stair.coord = {\"x\":i,\"y\":j};\r\n        map.addChild(stair);\r\n      }\r\n      if(wrld[i][j] === \"e\"){\r\n        let slime = new Enemy(50,function(){return 5},PIXI.loader.resources[\"./assets/slimebig.png\"].texture,PIXI.loader.resources[\"./assets/slime.png\"].texture); \r\n        slime.x += j*64;\r\n        slime.y += i*64;\r\n        slime.coord.x = j;\r\n        slime.coord.y = i;\r\n        enemies.push(slime);\r\n        bg(i,j)\r\n      }\r\n      if(wrld[i][j] === \"r\"){\r\n        let firerat = new Enemy(150,function(){return 10},PIXI.loader.resources[\"./assets/fireratbig.png\"].texture,PIXI.loader.resources[\"./assets/firerat.png\"].texture); \r\n        firerat.x += j*64;\r\n        firerat.y += i*64 - 78;\r\n        firerat.coord.x = j;\r\n        firerat.coord.y = i;\r\n        enemies.push(firerat);\r\n        tall.push(firerat.sprite);\r\n        bg(i,j)\r\n      }\r\n      if(wrld[i][j] === \"z\"){\r\n        let zig = new Enemy(500,function(){return 25},PIXI.loader.resources[\"./assets/zeegas.png\"].texture,PIXI.loader.resources[\"./assets/zeegas.png\"].texture)\r\n        zig.x += j * 64;\r\n        zig.y += i * 64 - 78;\r\n        zig.pure = true;\r\n        zig.coord.x = j;\r\n        zig.coord.y = i;\r\n        console.log(zig)\r\n        enemies.push(zig)\r\n        tall.push(zig.sprite);\r\n        bg(i,j)\r\n\r\n      }\r\n    }\r\n    }\r\n  }\r\n  build(worlds[0])\r\n  window.loop = new fps(function(){\r\n    //console.log(slime.x,\",\",slime.y)\r\n    //console.log(player.x,\",\",player.y)\r\n    player.move()\r\n    if(world[player.coord.y][player.coord.x] === \"s\"){\r\n      while(stage.children[0]) { stage.removeChild(stage.children[0]); }\r\n      build(worlds[worlds.indexOf(world)+1]);\r\n    }\r\n    enemies.forEach(function(val){\r\n      if(val.coord.x === player.coord.x && val.coord.y === player.coord.y && val.valid !== false){\r\n        loop.stop();\r\n        let battle = new Encounter()\r\n        battle.start(player,val)\r\n      }\r\n    })\r\n    app.render(map)\r\n    })\r\n  }\r\n\n\n\n// WEBPACK FOOTER //\n// ./active/dungeon/scripts/index.js","module.exports = new function () {\r\n    var a = this;\r\n    this.renderer = \"\";\r\n    this.canvas = function (width, height) {\r\n        var canvas = document.createElement('canvas');\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        var ctx = canvas.getContext(\"2d\");\r\n        return {\r\n            \"canvas\": canvas,\r\n            \"ctx\": ctx\r\n        };\r\n    };\r\n    this.rectangle = function (width, height, color) {\r\n        var b = a.canvas(width, height);\r\n        b.ctx.fillStyle = color;\r\n        b.ctx.fillRect(0, 0, width, height);\r\n        return PIXI.Texture.fromCanvas(b.canvas);\r\n    };\r\n    this.circle = function (radius, color) {\r\n        var b = a.canvas(radius * 2, radius * 2);\r\n        b.ctx.fillStyle = color;\r\n        b.ctx.beginPath();\r\n        b.ctx.arc(radius, radius, radius, 0, 2 * Math.PI);\r\n        b.ctx.fill();\r\n        return PIXI.Texture.fromCanvas(b.canvas);\r\n    };\r\n}();\r\n\n\n\n// WEBPACK FOOTER //\n// ./active/dungeon/scripts/drawing/shapes.js","export default new function() {\r\n    var a = this;\r\n    this.map = [];\r\n    this.tethers = [];\r\n    this.listen = function() {\r\n        document.onkeydown = function(e) {\r\n            e = e || window.event;\r\n            e = e.which || e.keyCode || 0;\r\n            if (a.map.indexOf(e) == -1) {\r\n                a.map.push(e);\r\n            }\r\n            a.tethers.forEach(function(tether, index) {\r\n                if (tether.type == \"down\") {\r\n                    if (e === tether.key) {\r\n                        tether.func();\r\n                        if (!tether.perma) a.tethers.splice(index, 1);\r\n                    }\r\n                }\r\n            });\r\n        };\r\n        document.onkeyup = function(e) {\r\n            e = e || window.event;\r\n            e = e.which || e.keyCode || 0;\r\n                // use e.keyCode\r\n            if (a.map.indexOf(e) != -1) {\r\n                a.map.splice(a.map.indexOf(e), 1);\r\n            }\r\n            a.tethers.forEach(function(tether, index) {\r\n                if (tether.type == \"up\") {\r\n                    if (e === tether.key) {\r\n                        tether.func();\r\n                        if (!tether.perma) a.tethers.splice(index, 1);\r\n                    }\r\n                }\r\n            });\r\n        };\r\n    };\r\n    this.check = function(key, callback, not) {\r\n        if (typeof key != \"object\") {\r\n            key = [key];\r\n        }\r\n        for (var i = 0; i < key.length; i++) {\r\n            if (a.map.indexOf(key[i]) != -1) {\r\n                callback();\r\n                i = key.length;\r\n                return true;\r\n            }\r\n        }\r\n        if (not !== undefined) {\r\n            not();\r\n        }\r\n        return false;\r\n    };\r\n    this.waitUp = function(key, func, perma) {\r\n        if (perma === undefined) {\r\n            perma = false;\r\n        }\r\n        a.tethers.push({\r\n            \"key\": key,\r\n            \"func\": func,\r\n            \"type\": \"up\",\r\n            \"perma\": perma\r\n        });\r\n    };\r\n    this.waitDown = function(key, func, perma,strictless) {\r\n        if (perma === undefined) {\r\n            perma = false;\r\n        }\r\n        if(a.tethers.every(function(val){\r\n            return key !== val.key\r\n        }) || strictless){\r\n            console.log(\"veritable beans\")\r\n        a.tethers.push({\r\n            \"key\": key,\r\n            \"func\": func,\r\n            \"type\": \"down\",\r\n            \"perma\": perma\r\n        });\r\n        }\r\n    };\r\n}();\r\n\n\n\n// WEBPACK FOOTER //\n// ./active/dungeon/scripts/utilities/keypress.js","import key from \"./../utilities/keypress.js\";\r\nlet runeMap = {\r\n    \"Q\":81,\r\n    \"A\":65,\r\n    \"R\":82,\r\n    \"W\":87,\r\n    \"F\":70\r\n}\r\nexport default class{\r\n    constructor(name,runes,effect,duration,amount,cost,anim,animFrames){\r\n        this.name = name\r\n        this.runes = runes\r\n        this.effect = effect\r\n        this.duration = duration\r\n        this.amount = amount\r\n        this.cost = cost\r\n        this.anim = anim;\r\n        this.animFrames = animFrames;\r\n    }\r\n    cast(){\r\n        this.scroll = \"\"\r\n        for(let i = 0; i < this.amount;i++){\r\n            this.scroll += this.runes[Math.floor(Math.random()*this.runes.length)]\r\n        }\r\n    }\r\n    initiate(){\r\n        let started = false;\r\n        document.addEventListener('keydown', function(){started = true}, false);\r\n        key.tethers = []\r\n        let spell = this;\r\n        let scrollContainer = new PIXI.Container();\r\n        this.cast();\r\n        let duration = this.duration * 60;\r\n        let lock = 0;\r\n        let index = 0;\r\n        spell.scroll.split(\"\").forEach(function(val,index){\r\n            let rune = new PIXI.Text(val,{fontFamily : 'Mono', fontSize: 24, fill : 0xffffff});\r\n            rune.x = (index % 20) * 32 + 24;\r\n            rune.y = 64 * 6 + Math.floor(index/20) * 32 + 32;\r\n            scrollContainer.addChild(rune);\r\n        })\r\n        battle.addChild(scrollContainer);\r\n        return function(cb,end,quinter,enemy,player){\r\n            if(quinter === true){\r\n                battle.removeChild(scrollContainer);\r\n            }\r\n            if(duration <= 0){\r\n                battle.removeChild(scrollContainer);\r\n                end();\r\n                return 0;\r\n            } else{\r\n                if(started){\r\n                    duration--;\r\n                }\r\n                if(lock <= 0){\r\n                        for(let i = 0;i < spell.runes.length;i++){\r\n                            key.waitDown(runeMap[spell.runes[i]],function(){\r\n                            if(spell.runes[i] === spell.scroll[index]){\r\n                                scrollContainer.children[index].style.fill = 0x00ff00\r\n                                index += 1;\r\n                                //Success!\r\n                                i = spell.runes.length\r\n                                spell.effect(enemy,player)\r\n                                if(index === spell.scroll.length){\r\n                                    duration = 0;\r\n                                }\r\n                                cb();\r\n                                return 1;\r\n                            } else{\r\n                                lock = spell.duration * 60 / 10\r\n                                return 0;\r\n                            }\r\n                        })\r\n                        }\r\n                }\r\n                else{\r\n                    lock--;\r\n                }\r\n            }\r\n            return 0;\r\n        }\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./active/dungeon/scripts/misc/spell.js","export default class{\r\n    constructor(health,attack,big,small){\r\n        this.health = health\r\n        this.attack = attack\r\n        this.bigTex = big\r\n        this.smallTex = small\r\n        this.sprite = new PIXI.Sprite(this.smallTex);\r\n        this.sprite.anchor.x = 0.5;\r\n        this.sprite.x = 32;\r\n\r\n        this.maxHealth = health;\r\n        this.health = health;\r\n        this.coord = {\"x\":0,\"y\":0}\r\n        map.addChild(this.sprite)\r\n    }\r\n    get x(){\r\n        return this.sprite.x\r\n    }\r\n    set x(x){\r\n        this.sprite.x = x\r\n    }\r\n    get y(){\r\n        return this.sprite.y\r\n    }\r\n    set y(y){\r\n        this.sprite.y = y\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./active/dungeon/scripts/misc/enemy.js","import shapes from \"./../drawing/shapes.js\";\r\nimport Spell from \"./spell.js\";\r\nexport default class{\r\n    constructor(){\r\n        this.sprite = new PIXI.Sprite(PIXI.loader.resources[\"./assets/steve-stand.png\"].texture);\r\n        this.sprite.x = 702/2 + 2\r\n        this.sprite.y = 578/2 - 32\r\n        this.counter = 0\r\n        this.mode = \"\"\r\n        this.sprite.anchor.x = 0.5;\r\n        this.coord = {\"x\":0,\"y\":0};\r\n        this.maxHealth = 50;\r\n        this.health = 50;\r\n        this.maxMana = 50;\r\n        this.mana = 50;\r\n        map.addChild(this.sprite);\r\n        this.spells = [\r\n            new Spell(\"Attack\",[\"A\"],function(e,p){e.health-=10},5,3,5,\"slash\",14),\r\n            new Spell(\"Multiattack\",[\"Q\",\"A\"],function(e,p){e.health -= 5;},5,25,10,\"slash\",14),\r\n            new Spell(\"Life Steal\",[\"R\",\"A\"],function(e,p){e.health -= 5; p.health += 5;},6,30,20,\"slash\",14),\r\n            new Spell(\"Fire Strike\",[\"Q\",\"A\",\"F\"],function(e,p,t){e.health -= 10; t = \"flame\";},8,30,20,\"flame\",15),\r\n            new Spell(\"Aqua Heal\",[\"Q\",\"R\",\"W\"],function(e,p){p += 5},3,5,25,\"none\",0),\r\n            new Spell(\"Scalding Water\",[\"Q\",\"A\",\"W\",\"F\"],function(e){e.health -= 5},15,50,50,\"water\",7)\r\n        ]\r\n    }\r\n    move(){\r\n        let player = this\r\n\r\n        if(player.mode !== \"\"){\r\n            let testcheck = world[player.coord.y + player.mode[1] / 4][player.coord.x + player.mode[0] / 4] === \"1\" //||\r\n            //world[player.coord.y + player.mode[1] / 4][player.coord.x + player.mode[0] / 4] === \"z\";\r\n            if(!testcheck){\r\n                tall.sort(function(a,b){\r\n                    return a.y-b.y\r\n                })\r\n                tall.forEach(function(val){\r\n                    map.removeChild(val)\r\n                    map.addChild(val)\r\n                })\r\n                //Begin animation loop\r\n                player.counter += 1;\r\n                if(player.counter % 24 < 8){\r\n                    player.sprite.texture = PIXI.loader.resources[\"./assets/steve-2.png\"].texture;\r\n                } else if(player.counter % 24 < 16){\r\n                    player.sprite.texture = PIXI.loader.resources[\"./assets/steve-stand.png\"].texture;\r\n                }\r\n                else{\r\n                    player.sprite.texture = PIXI.loader.resources[\"./assets/steve.png\"].texture;\r\n                }\r\n                map.x -= player.mode[0] * 2/3;\r\n                map.y -= player.mode[1] * 2/3;\r\n                player.x += player.mode[0] * 2/3;\r\n                player.y += player.mode[1] * 2/3;\r\n\r\n                if(player.counter === 24){\r\n                    player.coord.y += player.mode[1] / 4;\r\n                    player.coord.x += player.mode[0] / 4;\r\n                    player.x = Math.round(player.x);\r\n                    player.y = Math.round(player.y);\r\n                player.mode = \"\"\r\n                if(key.check([87,38,65,37,40,83,68,39],function(){})){\r\n                    player.sprite.texture = PIXI.loader.resources[\"./assets/steve-2.png\"].texture;\r\n                } else{\r\n                    player.sprite.texture = PIXI.loader.resources[\"./assets/steve-stand.png\"].texture;\r\n                }\r\n                }\r\n            } else{\r\n                player.mode = \"\"\r\n            }\r\n          }\r\n          key.check([87,38], function() {\r\n            if (player.mode === \"\"){\r\n              //up\r\n              player.mode = [0,-4]\r\n              player.counter = 0\r\n            }\r\n          })\r\n          key.check([65,37], function() {\r\n            if (player.mode === \"\"){\r\n              //left\r\n              player.mode = [-4,0]\r\n              player.counter = 0\r\n              player.sprite.scale.x = 1;\r\n            }\r\n          })\r\n          key.check([83,40], function() {\r\n            if (player.mode === \"\"){\r\n              //down\r\n              player.mode = [0,4]\r\n              player.counter = 0\r\n            }\r\n          })\r\n          key.check([68,39], function() {\r\n            if (player.mode === \"\"){\r\n              //right\r\n              player.mode = [4,0]\r\n              player.counter = 0\r\n              player.sprite.scale.x = -1;\r\n            }\r\n          })\r\n    }\r\n    get x(){\r\n        return this.sprite.x\r\n    }\r\n    set x(x){\r\n        this.sprite.x = x\r\n    }\r\n    get y(){\r\n        return this.sprite.y\r\n    }\r\n    set y(y){\r\n        this.sprite.y = y\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./active/dungeon/scripts/misc/player.js","import shapes from \"./../drawing/shapes.js\";\r\nimport fps from \"./../utilities/fps.js\";\r\nimport statbar from \"./statbar.js\";\r\nimport Animation from \"./../utilities/animate.js\";\r\nexport default class{\r\n    constructor(){\r\n    }\r\n    start(player,enemy){\r\n        player.mana = player.maxMana\r\n        let playerHealth = new statbar(player.health,player.maxHealth,\r\n            PIXI.loader.resources[\"./assets/hpstart.png\"].texture,\r\n            PIXI.loader.resources[\"./assets/hpbodyfill.png\"].texture,\r\n            PIXI.loader.resources[\"./assets/goldbody.png\"].texture,\r\n            PIXI.loader.resources[\"./assets/goldend.png\"].texture)\r\n        let playerMana = new statbar(player.mana,player.maxMana,\r\n            PIXI.loader.resources[\"./assets/mpstart.png\"].texture,\r\n            PIXI.loader.resources[\"./assets/mpbodyfill.png\"].texture,\r\n            PIXI.loader.resources[\"./assets/goldbody.png\"].texture,\r\n            PIXI.loader.resources[\"./assets/goldend.png\"].texture)\r\n        if(enemy.pure){\r\n            var enemyHealth = new statbar(enemy.health,enemy.maxHealth,\r\n                PIXI.loader.resources[\"./assets/hpblue.png\"].texture,\r\n                PIXI.loader.resources[\"./assets/mpbodyfill.png\"].texture,\r\n                PIXI.loader.resources[\"./assets/goldbody.png\"].texture,\r\n                PIXI.loader.resources[\"./assets/goldend.png\"].texture)\r\n        } else{\r\n        var enemyHealth = new statbar(enemy.health,enemy.maxHealth,\r\n            PIXI.loader.resources[\"./assets/evstart.png\"].texture,\r\n            PIXI.loader.resources[\"./assets/evbodyfill.png\"].texture,\r\n            PIXI.loader.resources[\"./assets/evbody.png\"].texture,\r\n            PIXI.loader.resources[\"./assets/evend.png\"].texture)\r\n        }\r\n        playerMana.sprite.y = 32;\r\n        playerHealth.sprite.y = 318;\r\n        playerMana.sprite.y = 350;\r\n        enemyHealth.sprite.x = 698 - enemyHealth.sprite.width;\r\n        battle.addChild(playerHealth.sprite);\r\n        battle.addChild(playerMana.sprite);\r\n        battle.addChild(enemyHealth.sprite);\r\n        let obj = this;\r\n        let slashes = [];\r\n        obj.counter = 0;\r\n        let active = \"\";\r\n        let casting = function(){};\r\n        let spellContainer = new PIXI.Container();\r\n\r\n\r\n\r\n        let animate = new Animation();\r\n\r\n\r\n        function turn(){\r\n            animate.addFrame(0,function(cb){ //Bring up spell casting menu and handle spellcasting. TODO: Add animation syntax.\r\n                player.spells.forEach(function(spl,index){\r\n                    let spellHold = new PIXI.Container();\r\n                    let spell = new PIXI.Sprite(shapes.rectangle(160,64,\"#ddd\"))\r\n                    let text = new PIXI.Text(spl.name,{fontFamily : 'Mono', fontSize: 16, fill : 0x000,wordWrap:true,wordWrapWidth:140})\r\n                    text.x = 10;\r\n                    text.y = 10;\r\n                    spellHold.addChild(spell);\r\n                    spellHold.addChild(text);\r\n                    spellHold.x = (index % 3) * 248 + 24;\r\n                    spell.buttonMode = true;\r\n                    spell.interactive = true;\r\n                    spellHold.y = 410 + Math.floor(index /3) * 72;\r\n                    spell.on(\"click\",function(){\r\n                        if(player.mana < spl.cost){\r\n                            player.health -= Math.ceil((spl.cost - player.mana) / 5)\r\n                            player.mana = 0;\r\n                        } else{\r\n                            player.mana -= spl.cost;\r\n                        }\r\n                        playerHealth.fill.width = player.health;\r\n                        if(player.health <= 0){\r\n                            playerHealth.fill.width = 0;\r\n                        }\r\n                        playerMana.fill.width = player.mana\r\n                        if(player.mana <= 0){\r\n                            playerMana.fill.width = 0;\r\n                        }\r\n                        active = spl;\r\n                        casting = spl.initiate();\r\n                        cb()\r\n                    })\r\n                    spellContainer.addChild(spellHold)\r\n                    \r\n                })\r\n                battle.addChild(spellContainer);\r\n            }).addFrame(0,function(cb){ //Get rid of spellcasting menu\r\n                spellContainer.children = \"\"\r\n                spellContainer = new PIXI.Container();\r\n                cb()\r\n            }).addFrame(-1,function(cb){ //Handle spellcasting and spellcasting animations\r\n                casting(function(){\r\n                    if(enemy.health <= 0){\r\n                        casting(function(){},function(){},true);\r\n                        enemyHealth.fill.width = 0;\r\n                        cb()\r\n                    } else{\r\n                        enemyHealth.fill.width = enemy.health\r\n                            let slash = new PIXI.Sprite(PIXI.loader.resources[\"./assets/\"+active.anim+\"/1.png\"].texture);\r\n                            slash.x = 702/2 + Math.random()*100 -50;\r\n                            slash.anchor.x = 0.5;\r\n                            slash.y = 64 + enemy.sprite.height / 2 + Math.random()*100 -50;\r\n                            slash.anchor.y = 0.5;\r\n                            battle.addChild(slash);\r\n                            animate.addAsync(active.animFrames,function(x){\r\n                                slash.texture = PIXI.loader.resources[\"./assets/\"+active.anim+\"/\"+x+\".png\"].texture;\r\n                            },function(){\r\n                                battle.removeChild(slash);\r\n                            })\r\n                    }\r\n                },cb,false,enemy,player)\r\n            }).addFrame(-1,function(cb){ //If enemy is dying, end the loop.\r\n                if(enemy.health <= 0){\r\n                     enemy.sprite.alpha -= 0.05;\r\n                     if(enemy.sprite.alpha <= 0){\r\n                        console.log(\"end encounter, give gold\");\r\n                        battle.alpha = 1;\r\n                        map.alpha = 0;\r\n                        animate.addFrame(20,function(){\r\n                            battle.alpha -= 0.05;\r\n                            map.alpha += 0.05;\r\n                        },function(){\r\n                            stage.addChild(map);\r\n                            stage.removeChild(battle);\r\n                            map.removeChild(enemy);\r\n                            enemies.splice(enemies.indexOf(enemy),1)\r\n                            loop.start();\r\n                            obj.timer.stop();\r\n                            battle.children.forEach(function(child){\r\n                                battle.removeChild(child);\r\n                            })\r\n                        })\r\n                        cb()\r\n                     }\r\n                } else{\r\n                    cb()\r\n                }\r\n            }).addFrame(0,function(cb){   \r\n                console.log(\"ayo\")\r\n                    player.health -= enemy.attack();\r\n                    playerHealth.fill.width = player.health;\r\n                    if(player.health <= 0){\r\n                        casting(function(){},function(){},true);\r\n                        let dialogue = -1;\r\n                        let dialogueList = [\r\n                            \"???: You should turn back.\",\r\n                            \"Jaysun: No!\",\r\n                            \"*??? sighs*\",\r\n                            \"Zygas: The names Zygas. Good luck in the dungeon.\"\r\n        \r\n                        ]\r\n                        let txt = new PIXI.Text(\"\",{fontFamily : 'Mono', fontSize: 24, fill : 0xffffff,wordWrap:true,wordWrapWidth:666});\r\n                        txt.x = 26;\r\n                        txt.y = 412;\r\n                        battle.addChild(txt);\r\n                        txt.text = dialogueList[0]\r\n                        function awaitEnter(){\r\n                            dialogue ++;\r\n                            txt.text = dialogueList[dialogue]\r\n                            if(dialogue === dialogueList.length){\r\n                                enemy.valid = false;\r\n                                stage.addChild(map);\r\n                                stage.removeChild(battle);\r\n                                map.alpha = 1;\r\n                                if(!enemy.pure){map.removeChild(enemy);\r\n                                enemies.splice(enemies.indexOf(enemy),1)\r\n                                } else{\r\n                                    map.addChild(enemy.sprite);\r\n                                }\r\n                                loop.start();\r\n                                obj.timer.stop();\r\n                                battle.children.forEach(function(child){\r\n                                    battle.removeChild(child);\r\n                                })\r\n                            } else{\r\n                                key.waitDown(13,awaitEnter,false,true)\r\n                            }\r\n                        }\r\n                        awaitEnter()\r\n                    } else{\r\n                        console.log(\"burn?\")\r\n                        turn()\r\n                        cb()\r\n                    }\r\n            })\r\n\r\n        }  \r\n\r\n\r\n//\r\n            animate.addFrame(20,function(){\r\n                map.alpha -= 0.05\r\n            }).addFrame(0,function(cb){ //Initialize the battle with a frameless frame\r\n                stage.removeChild(map);\r\n                stage.addChild(battle);\r\n                map.removeChild(enemy.sprite);\r\n                battle.addChild(enemy.sprite);\r\n                battle.alpha = 0;\r\n                enemy.sprite.texture = enemy.bigTex\r\n                enemy.x = 702/2;\r\n                enemy.y = 64;\r\n                obj.counter += 1;\r\n                let wrapper = new PIXI.Sprite(PIXI.loader.resources[\"./assets/dialoguebox.png\"].texture);\r\n                wrapper.y = 384;\r\n                battle.addChild(wrapper);\r\n                cb()\r\n            }).addFrame(20,function(){ //Fade in the battle\r\n                battle.alpha += 0.05;\r\n            })\r\n            animate.addFrame(0,function(cb){ //Check if there is dialogue for the encounter, otherwise skip\r\n                if(enemy.pure && worlds.indexOf(world) === 0){\r\n                    let dialogue = -1;\r\n                    let txt = new PIXI.Text(\"\",{fontFamily : 'Mono', fontSize: 24, fill : 0xffffff,wordWrap:true,wordWrapWidth:666});\r\n                    txt.x = 26;\r\n                    txt.y = 412;\r\n                    battle.addChild(txt);\r\n\r\n                    let dialogueList = [\r\n                        \"Jaysun: Hello!\",\r\n                        \"Jaysun: My names Jaysun, whats yours?\" ,\r\n                        \"???: Youre awfully young to be wandering here, any reason?\" ,\r\n                        \"Jaysun: Someone told me, theres great powers hidden here!!\" ,\r\n                        \"???: Hmph, we have our dreams.\" ,\r\n                        \"???: Id suggest your turn back now.\" ,\r\n                        \"Jaysun: What! Why?!\",\r\n                        \"???: A child like you doesnt belong in this cave.\" ,\r\n                        \"Jaysun: I am strong!\",\r\n                        \"???: Youre a sorcerer, yes?\",\r\n                        \"Jaysun: Mhm, Ive been practicing.\" ,\r\n                        \"???: How about, we duel. See how strong you really are.\",\r\n                        \"???: Ill go easy.\"\r\n                        \r\n                        ]\r\n                    txt.text = dialogueList[0]\r\n                    function awaitEnter(){\r\n                        dialogue ++;\r\n                        txt.text = dialogueList[dialogue]\r\n                        if(dialogue === dialogueList.length){\r\n                            cb()\r\n                        } else{\r\n                            key.waitDown(13,awaitEnter,false,true)\r\n                        }\r\n                    }\r\n                    awaitEnter()\r\n                    \r\n                } else{\r\n                    cb()\r\n                }\r\n            })\r\n            turn()\r\n            /* else{\r\n                \r\n                    player.health -= enemy.attack();\r\n                    playerHealth.fill.width = player.health;\r\n                    obj.counter = 40;\r\n                    if(player.health <= 0){\r\n                        obj.timer.stop()\r\n                        casting(function(){},function(){},true);\r\n                        let dialogue = -1;\r\n                        let dialogueList = [\r\n                            \"???: You should turn back.\",\r\n                            \"Jaysun: No!\",\r\n                            \"*??? sighs*\",\r\n                            \"Zygas: The names Zygas. Good luck in the dungeon.\"\r\n        \r\n                        ]\r\n                        let txt = new PIXI.Text(\"\",{fontFamily : 'Mono', fontSize: 24, fill : 0xffffff,wordWrap:true,wordWrapWidth:666});\r\n                        txt.x = 26;\r\n                        txt.y = 412;\r\n                        battle.addChild(txt);\r\n                        txt.text = dialogueList[0]\r\n                        function awaitEnter(){\r\n                            dialogue ++;\r\n                            txt.text = dialogueList[dialogue]\r\n                            if(dialogue === dialogueList.length){\r\n                                enemy.valid = false;\r\n                                stage.addChild(map);\r\n                                stage.removeChild(battle);\r\n                                map.alpha = 1;\r\n                                if(!enemy.pure){map.removeChild(enemy);\r\n                                enemies.splice(enemies.indexOf(enemy),1)\r\n                                } else{\r\n                                    map.addChild(enemy.sprite);\r\n                                }\r\n                                loop.start();\r\n                                obj.timer.stop();\r\n                                battle.children.forEach(function(child){\r\n                                    battle.removeChild(child);\r\n                                })\r\n                            } else{\r\n                                key.waitDown(13,awaitEnter,false,true)\r\n                            }\r\n                        }\r\n                        awaitEnter()\r\n                    }\r\n            }\r\n*/\r\n        obj.timer = new fps(function(){\r\n            animate.tick()\r\n            /*slashes.forEach(function(val,i){\r\n                val.increment += 1;\r\n                if(val.increment >= active.animFrames){\r\n                    battle.removeChild(val);\r\n                    slashes.splice(i,1);\r\n\r\n                } else{\r\n                    val.texture = PIXI.loader.resources[\"./assets/\"+active.anim+\"/\"+val.increment+\".png\"].texture;\r\n                }\r\n            })*/\r\n        })\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./active/dungeon/scripts/misc/encounter.js","module.exports = function(cb) {\r\n    this.going = true;\r\n    this.start = function() {\r\n        this.going = true;\r\n        requestAnimationFrame(draw);\r\n    };\r\n    this.resume = this.start;\r\n    this.stop = function() {\r\n        this.going = false;\r\n    };\r\n    this.pause = this.stop;\r\n    this.toggle = function() {\r\n        this.going = !this.going;\r\n    };\r\n    this.restart = function() {\r\n        ct = 0;\r\n    };\r\n    var a = this;\r\n    var ct = 0;\r\n\r\n\r\n    function draw() {\r\n        if (a.going) {\r\n            requestAnimationFrame(draw);\r\n            ct++\r\n            cb(ct,a)\r\n            ct%= 64;\r\n        }\r\n    }\r\n    draw();\r\n    return this;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./active/dungeon/scripts/utilities/fps.js","export default class{\r\n    constructor(fills,max,starts,shades,bodys,ends){\r\n        this.sprite = new PIXI.Container();\r\n        \r\n\r\n        let body = new PIXI.Sprite(bodys)\r\n        body.x = 28;\r\n        body.width = max + 2;\r\n        this.sprite.addChild(body);\r\n\r\n        this.fill = new PIXI.Sprite(shades)\r\n        this.fill.x = 28;\r\n        this.fill.y = 10;\r\n        this.fill.width = fills + 4;\r\n        this.sprite.addChild(this.fill);\r\n\r\n        let end = new PIXI.Sprite(ends)\r\n        end.x = max - 2 + 30;\r\n        this.sprite.addChild(end);\r\n\r\n        this.sprite.addChild(new PIXI.Sprite(starts))\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./active/dungeon/scripts/misc/statbar.js","class Frame {\r\n\tconstructor(duration, func, callback) {\r\n\t\tthis.progress = 0;\r\n\t\tthis.duration = duration;\r\n\t\tthis.func = func;\r\n\t\tthis.callback = callback;\r\n\t}\r\n\ttick(animation) {\r\n\t\tif((this.duration === 0 && this.progress === 0) || this.duration === -1){\r\n\t\t\tlet a = this;\r\n\t\t\tthis.progress++;\r\n\t\t\t//don't pass progress, pass callback\r\n\t\t\tthis.func(\r\n\t\t\t\tfunction(){\r\n\t\t\t\t\tanimation.frames.shift();\r\n\t\t\t\t\tanimation.tick();\r\n\t\t\t\t});\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse if (this.progress < this.duration) {\r\n\t\t\tthis.progress++;\r\n\t\t\t//Passes the progress based on 0\r\n\t\t\tthis.func(this.progress);\r\n\t\t\treturn true;\r\n\t\t} else if(this.duration === 0){\r\n\t\t\treturn true;\r\n\t\t} else{\r\n\t\t\tif (typeof this.callback == \"function\") {\r\n\t\t\t\tthis.callback();\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n}\r\nexport default class{\r\n\tconstructor() {\r\n\t\tthis.frames = [];\r\n\t\tthis.async = [];\r\n\t}\r\n\t/*\r\n\taddFrame\r\n\t  - name:\r\n\t    * Set to a name to add to a specific chain of animations\r\n\t\t* Leave blank (null, 0, \"\", false, etc.) to be executed in the loop until completion as soon as declared.\r\n\t  - duration:\r\n\t    * How many ticks the animation will last for\r\n\t  - func:\r\n\t    * The code to be run in the animation sequence\r\n\t  - callback (optional):\r\n\t    * A function to be run after the completion of the animation\r\n\t*/\r\n\taddFrame(duration, func, callback) {\r\n\t\tthis.frames.push(new Frame(duration, func, callback));\r\n\t\treturn this;\r\n\t}\r\n\taddAsync(duration,func,callback){\r\n\t\tthis.async.push(new Frame(duration, func, callback));\r\n\t\treturn this;\r\n\t}\r\n\ttick() {\r\n\t\tlet a = this;\r\n\t\t//Sloppy way to get every synchronous way, how fun.\r\n\t\tif (!a.frames[0].tick(a)) {\r\n\t\t\ta.frames.shift();\r\n\t\t}\r\n\t\tfor(let i = this.async.length - 1;i >= 0;i--){\r\n\t\t\tif (!this.async[i].tick(a)) {\r\n\t\t\t\tthis.async.splice(i,1)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./active/dungeon/scripts/utilities/animate.js"],"sourceRoot":""}