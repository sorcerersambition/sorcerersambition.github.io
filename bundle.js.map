{"version":3,"sources":["webpack:///webpack/bootstrap 8b0b2eae3aab2ce9740f","webpack:///./active/dungeon/scripts/index.js","webpack:///./active/dungeon/scripts/drawing/shapes.js","webpack:///./active/dungeon/scripts/utilities/keypress.js","webpack:///./active/dungeon/scripts/misc/spell.js","webpack:///./active/dungeon/scripts/misc/enemy.js","webpack:///./active/dungeon/scripts/misc/player.js","webpack:///./active/dungeon/scripts/misc/encounter.js","webpack:///./active/dungeon/scripts/utilities/fps.js","webpack:///./active/dungeon/scripts/misc/statbar.js","webpack:///./active/dungeon/scripts/utilities/animate.js","webpack:///./active/dungeon/scripts/misc/dialogue.js"],"names":["window","worlds","split","map","arr","val","world","key","listen","g","app","PIXI","Application","backgroundColor","antialias","stage","loader","add","load","fonts","WebFont","custom","families","urls","active","console","log","setup","document","body","appendChild","view","build","wrld","Container","barriers","battle","enemies","addChild","player","sprite","tall","sort","a","b","y","forEach","removeChild","bg","i","j","tile","Sprite","resources","texture","anchor","x","coord","length","wall","rectangle","fire","scale","push","stair","slime","firerat","zig","pure","loop","move","children","indexOf","valid","stop","start","render","module","exports","renderer","canvas","width","height","createElement","ctx","getContext","color","fillStyle","fillRect","Texture","fromCanvas","circle","radius","beginPath","arc","Math","PI","fill","tethers","onkeydown","e","event","which","keyCode","tether","index","type","func","perma","splice","onkeyup","check","callback","not","undefined","waitUp","waitDown","strictless","every","runeMap","name","runes","effect","duration","amount","cost","anim","animFrames","scroll","floor","random","started","addEventListener","spell","scrollContainer","cast","lock","rune","Text","fontFamily","fontSize","cb","end","quinter","enemy","style","health","attack","big","small","extra","bigTex","smallTex","dialogue","block","maxHealth","counter","mode","maxMana","mana","spells","p","t","testcheck","some","enem","round","playerHealth","playerMana","enemyHealth","obj","casting","spellContainer","animate","turn","addBreak","spl","spellHold","text","wordWrap","wordWrapWidth","buttonMode","interactive","on","ceil","initiate","addLoopingBreak","slash","addAsync","alpha","addFrame","child","timer","wrapper","tick","going","requestAnimationFrame","draw","resume","pause","toggle","restart","ct","fills","max","starts","shades","bodys","ends","Frame","progress","animation","frames","shift","async","dialogueList","txt","txtAnim","total","dia","substring","awaitEnter"],"mappings":"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","file":"active/dungeon/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8b0b2eae3aab2ce9740f","//Create a Pixi Application\r\nimport shapes from \"./drawing/shapes.js\";\r\nimport key from \"./utilities/keypress.js\";\r\nimport Spell from \"./misc/spell.js\";\r\nimport Enemy from \"./misc/enemy.js\";\r\nimport Player from \"./misc/player.js\";\r\nimport Encounter from \"./misc/encounter.js\";\r\nimport fps from \"./utilities/fps.js\";\r\nwindow.worlds = [`11111111\r\n1p000001\r\n10000001\r\n10000001\r\n10000z01\t\r\n10000011\r\n100000s1\r\n11111111`.split(\"\\n\"),\r\n`11111111\r\n1p010001\r\n10e1e1e1\r\n100001s1\r\n11111111`.split(\"\\n\"),\r\n`111111111\r\n1p0rF0s1\r\n11111111`.split(\"\\n\"),\r\n`1111111111111111111111111111\r\n1p00000000000000000000000001\r\n1eee00rrr0000000000000rrr001\r\n1e00e0r000000e000e0000r0r001\r\n1e00e0rrr000ee00e0e000r0r001\r\n1e00e0r0000e0e0e000e00r0r001\r\n1eee00rrr0e00ee00000e0rrr001\r\n1111111111111111111111111111`.split(\"\\n\")\r\n];\r\nworlds = worlds.map(function(arr) {\r\n\treturn arr.map(function(val) {\r\n\t\treturn val.split(\"\");\r\n\t})\r\n})\r\nwindow.world = window.worlds[0];\r\nwindow.key = key;\r\nkey.listen()\r\nwindow.g = {};\r\nwindow.app = new PIXI.Application(702, 576, {\r\n\tbackgroundColor: 0x000000,\r\n\tantialias: true\r\n});\r\nwindow.stage = app.stage;\r\n/*\r\n<3<3<3\r\nflashback to sensitive rectangle moving along grid\r\nproud parents\r\n- artist + dev\r\nfor(let i = 0; i < 18;i++){\r\n  let gridline = new PIXI.Sprite(shapes.rectangle(1,640,\"#000000\"));\r\n  gridline.x = i * 64;\r\n  map.addChild(gridline)\r\n\r\n}\r\nfor(let i = 0; i < 18;i++){\r\n  let gridline = new PIXI.Sprite(shapes.rectangle(768,1,\"#000000\"));\r\n  gridline.y = i * 64;\r\n  map.addChild(gridline)\r\n\r\n}*/\r\nPIXI.loader.add(\"./assets/hpblue.png\")\r\n\t.add(\"./assets/firerat.png\")\r\n\t.add(\"./assets/fireratbig.png\")\r\n\t.add(\"./assets/dialoguebox.png\")\r\n\t.add(\"./assets/gold.png\")\r\n\t.add(\"./assets/stair.png\")\r\n\t.add(\"./assets/zeegas.png\")\r\n\t.add(\"./assets/slash/1.png\")\r\n\t.add(\"./assets/slash/2.png\")\r\n\t.add(\"./assets/slash/3.png\")\r\n\t.add(\"./assets/slash/4.png\")\r\n\t.add(\"./assets/slash/5.png\")\r\n\t.add(\"./assets/slash/6.png\")\r\n\t.add(\"./assets/slash/7.png\")\r\n\t.add(\"./assets/slash/8.png\")\r\n\t.add(\"./assets/slash/9.png\")\r\n\t.add(\"./assets/slash/10.png\")\r\n\t.add(\"./assets/slash/11.png\")\r\n\t.add(\"./assets/slash/12.png\")\r\n\t.add(\"./assets/slash/13.png\")\r\n\t.add(\"./assets/slash/14.png\")\r\n\t.add(\"./assets/flame/1.png\")\r\n\t.add(\"./assets/flame/2.png\")\r\n\t.add(\"./assets/flame/3.png\")\r\n\t.add(\"./assets/flame/4.png\")\r\n\t.add(\"./assets/flame/5.png\")\r\n\t.add(\"./assets/flame/6.png\")\r\n\t.add(\"./assets/flame/7.png\")\r\n\t.add(\"./assets/flame/8.png\")\r\n\t.add(\"./assets/flame/9.png\")\r\n\t.add(\"./assets/flame/10.png\")\r\n\t.add(\"./assets/flame/11.png\")\r\n\t.add(\"./assets/flame/12.png\")\r\n\t.add(\"./assets/flame/13.png\")\r\n\t.add(\"./assets/flame/14.png\")\r\n\t.add(\"./assets/flame/15.png\")\r\n\t.add(\"./assets/water/1.png\")\r\n\t.add(\"./assets/water/2.png\")\r\n\t.add(\"./assets/water/3.png\")\r\n\t.add(\"./assets/water/4.png\")\r\n\t.add(\"./assets/water/5.png\")\r\n\t.add(\"./assets/water/6.png\")\r\n\t.add(\"./assets/water/7.png\")\r\n\t.add(\"./assets/slimebig.png\")\r\n\t.add(\"./assets/evstart.png\")\r\n\t.add(\"./assets/evbodyfill.png\")\r\n\t.add(\"./assets/evbody.png\")\r\n\t.add(\"./assets/evend.png\")\r\n\t.add(\"./assets/mpbodyfill.png\")\r\n\t.add(\"./assets/mpstart.png\")\r\n\t.add(\"./assets/hpbodyfill.png\")\r\n\t.add(\"./assets/hpstart.png\")\r\n\t.add(\"./assets/goldend.png\")\r\n\t.add(\"./assets/goldbody.png\")\r\n\t.add(\"./assets/tile.png\")\r\n\t.add(\"./assets/slime.png\")\r\n\t.add(\"./assets/qg.png\")\r\n\t.add(\"./assets/qw.png\")\r\n\t.add(\"./assets/ag.png\")\r\n\t.add(\"./assets/aw.png\")\r\n\t.add(\"./assets/steve.png\")\r\n\t.add(\"./assets/steve-2.png\")\r\n\t.add(\"./assets/menu.png\")\r\n\t.add(\"./assets/runes/A.png\")\r\n\t.add(\"./assets/runes/F.png\")\r\n\t.add(\"./assets/runes/Q.png\")\r\n\t.add(\"./assets/runes/R.png\")\r\n\t.add(\"./assets/runes/W.png\")\r\n\t.add(\"./assets/steve-stand.png\")\r\n\t.load(fonts);\r\n\r\nfunction fonts() {\r\n\tWebFont.load({\r\n\t\tcustom: {\r\n\t\t\tfamilies: ['Mono'],\r\n\t\t\turls: [\"stylesheet.css\"]\r\n\t\t},\r\n\t\tactive: e => {\r\n\t\t\tconsole.log(\"font loaded!\");\r\n\t\t\t// now start setting up your PixiJS (or canvas) stuff!\r\n\t\t\tsetup()\r\n\t\t}\r\n\t})\r\n}\r\ndocument.body.appendChild(app.view);\r\n\r\nfunction setup() {\r\n\tfunction build(wrld) {\r\n\t\twindow.map = new PIXI.Container();\r\n\t\twindow.barriers = [];\r\n\t\twindow.battle = new PIXI.Container();\r\n\t\twindow.enemies = [];\r\n\t\tstage.addChild(window.map)\r\n\t\tlet barriers = new PIXI.Container();\r\n\t\tmap.addChild(barriers);\r\n\t\tworld = wrld;\r\n\t\twindow.player = window.player || new Player();\r\n\t\tmap.addChild(player.sprite);\r\n\t\twindow.tall = [];\r\n\t\twindow.tall.sort(function(a, b) {\r\n\t\t\treturn a.y - b.y\r\n\t\t})\r\n\t\twindow.tall.forEach(function(val) {\r\n\t\t\tmap.removeChild(val)\r\n\t\t\tmap.addChild(val)\r\n\t\t})\r\n\r\n\t\tfunction bg(i, j) {\r\n\t\t\tlet tile = new PIXI.Sprite(PIXI.loader.resources[\"./assets/tile.png\"].texture)\r\n\t\t\ttile.anchor.x = 0.5;\r\n\t\t\ttile.x = j * 64 + 32 + 1;\r\n\t\t\ttile.y = i * 64;\r\n\t\t\ttile.coord = {\r\n\t\t\t\t\"x\": i,\r\n\t\t\t\t\"y\": j\r\n\t\t\t};\r\n\t\t\tbarriers.addChild(tile);\r\n\t\t}\r\n\t\tfor (let i = 0; i < wrld.length; i++) {\r\n\t\t\tfor (let j = 0; j < wrld[i].length; j++) {\r\n\t\t\t\tif (wrld[i][j] === \"1\") {\r\n\t\t\t\t\tlet wall = new PIXI.Sprite(shapes.rectangle(64, 64, \"#000\"))\r\n\t\t\t\t\twall.anchor.x = 0.5;\r\n\t\t\t\t\twall.x = j * 64 + 32 + 1;\r\n\t\t\t\t\twall.y = i * 64;\r\n\t\t\t\t\twall.coord = {\r\n\t\t\t\t\t\t\"x\": i,\r\n\t\t\t\t\t\t\"y\": j\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbarriers.addChild(wall);\r\n\t\t\t\t}\r\n\t\t\t\tif (wrld[i][j] === \"F\") {\r\n\t\t\t\t\tbg(i, j)\r\n\t\t\t\t\tlet fire = new PIXI.Sprite(PIXI.loader.resources[\"./assets/runes/F.png\"].texture)\r\n\t\t\t\t\tfire.anchor.x = 0.5;\r\n\t\t\t\t\tfire.scale.x = 0.25;\r\n\t\t\t\t\tfire.scale.y = 0.25;\r\n\t\t\t\t\tfire.x = j * 64 + 32 + 1;\r\n\t\t\t\t\tfire.y = i * 64;\r\n\t\t\t\t\tfire.coord = {\r\n\t\t\t\t\t\t\"x\": i,\r\n\t\t\t\t\t\t\"y\": j\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbarriers.addChild(fire);\r\n\t\t\t\t}\r\n\t\t\t\tif (wrld[i][j] === \"0\") {\r\n\t\t\t\t\tbg(i, j)\r\n\t\t\t\t}\r\n\t\t\t\tif (wrld[i][j] === \"p\") {\r\n\t\t\t\t\tmap.x -= j * 64 - 351;\r\n\t\t\t\t\tmap.y -= i * 64 - 576 / 2;\r\n\t\t\t\t\tplayer.x = j * 64 - 351 + 32 + 702/2 + 2;\r\n\t\t\t\t\tplayer.y = i * 64 - 576 / 2 - 32 + 578/2 - 32;\r\n\t\t\t\t\tplayer.coord.x = j;\r\n\t\t\t\t\tplayer.coord.y = i;\r\n\t\t\t\t\ttall.push(player.sprite);\r\n\t\t\t\t\tbg(i, j)\r\n\t\t\t\t}\r\n\t\t\t\tif (wrld[i][j] === \"s\") {\r\n\t\t\t\t\tlet stair = new PIXI.Sprite(PIXI.loader.resources[\"./assets/stair.png\"].texture)\r\n\t\t\t\t\tstair.anchor.x = 0.5;\r\n\t\t\t\t\tstair.x = j * 64 + 32 + 1;\r\n\t\t\t\t\tstair.y = i * 64;\r\n\t\t\t\t\tstair.coord = {\r\n\t\t\t\t\t\t\"x\": i,\r\n\t\t\t\t\t\t\"y\": j\r\n\t\t\t\t\t};\r\n\t\t\t\t\tmap.addChild(stair);\r\n\t\t\t\t}\r\n\t\t\t\tif (wrld[i][j] === \"e\") {\r\n\t\t\t\t\tlet slime = new Enemy(50, function() {\r\n\t\t\t\t\t\treturn 5\r\n\t\t\t\t\t}, PIXI.loader.resources[\"./assets/slimebig.png\"].texture, PIXI.loader.resources[\"./assets/slime.png\"].texture);\r\n\t\t\t\t\tslime.x += j * 64;\r\n\t\t\t\t\tslime.y += i * 64;\r\n\t\t\t\t\tslime.coord.x = j;\r\n\t\t\t\t\tslime.coord.y = i;\r\n\t\t\t\t\tenemies.push(slime);\r\n\t\t\t\t\tbg(i, j)\r\n\t\t\t\t}\r\n\t\t\t\tif (wrld[i][j] === \"r\") {\r\n\t\t\t\t\tlet firerat = new Enemy(150, function() {\r\n\t\t\t\t\t\treturn 10\r\n\t\t\t\t\t}, PIXI.loader.resources[\"./assets/fireratbig.png\"].texture, PIXI.loader.resources[\"./assets/firerat.png\"].texture);\r\n\t\t\t\t\tfirerat.x += j * 64;\r\n\t\t\t\t\tfirerat.y += i * 64 - 78;\r\n\t\t\t\t\tfirerat.coord.x = j;\r\n\t\t\t\t\tfirerat.coord.y = i;\r\n\t\t\t\t\tenemies.push(firerat);\r\n\t\t\t\t\ttall.push(firerat.sprite);\r\n\t\t\t\t\tbg(i, j)\r\n\t\t\t\t}\r\n\t\t\t\tif (wrld[i][j] === \"z\") {\r\n\t\t\t\t\tlet zig = new Enemy(500, function() {\r\n\t\t\t\t\t\treturn 25\r\n\t\t\t\t\t}, PIXI.loader.resources[\"./assets/zeegas.png\"].texture, PIXI.loader.resources[\"./assets/zeegas.png\"].texture, {\r\n\t\t\t\t\t\t\"dialogue\": {\r\n\t\t\t\t\t\t\t\"start\": [\r\n\t\t\t\t\t\t\t\t\"Jaysun: Hello!\",\r\n\t\t\t\t\t\t\t\t\"Jaysun: My name’s Jaysun, what’s yours?\",\r\n\t\t\t\t\t\t\t\t\"???: You’re awfully young to be wandering here, any reason?\",\r\n\t\t\t\t\t\t\t\t\"Jaysun: Someone told me, there’s great powers hidden here!!\",\r\n\t\t\t\t\t\t\t\t\"???: Hmph, we have our dreams.\",\r\n\t\t\t\t\t\t\t\t\"???: I’d suggest your turn back now.\",\r\n\t\t\t\t\t\t\t\t\"Jaysun: What! Why?!\",\r\n\t\t\t\t\t\t\t\t\"???: A child like you doesn’t belong in this cave.\",\r\n\t\t\t\t\t\t\t\t\"Jaysun: I am strong!\",\r\n\t\t\t\t\t\t\t\t\"???: You’re a sorcerer, yes?\",\r\n\t\t\t\t\t\t\t\t\"Jaysun: Mhm, I’ve been practicing.\",\r\n\t\t\t\t\t\t\t\t\"???: How about, we duel. See how strong you really are.\",\r\n\t\t\t\t\t\t\t\t\"???: I’ll go easy.\"],\r\n\t\t\t\t\t\t\t\"end\": [\"???: You should turn back.\",\r\n\t\t\t\t\t\t\t\t\"Jaysun: No!\",\r\n\t\t\t\t\t\t\t\t\"*??? sighs*\",\r\n\t\t\t\t\t\t\t\t\"Zygas: The name’s Zygas. Good luck in the dungeon.\"]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tzig.x = j * 64 + 32;\r\n\t\t\t\t\tzig.y = i * 64 - 78;\r\n\t\t\t\t\tzig.pure = true;\r\n\t\t\t\t\tzig.coord.x = j;\r\n\t\t\t\t\tzig.coord.y = i;\r\n\t\t\t\t\tconsole.log(zig)\r\n\t\t\t\t\tenemies.push(zig)\r\n\t\t\t\t\ttall.push(zig.sprite);\r\n\t\t\t\t\tbg(i, j)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tbuild(worlds[0])\r\n\twindow.loop = new fps(function() {\r\n\t\t//console.log(slime.x,\",\",slime.y)\r\n\t\t//console.log(player.x,\",\",player.y)\r\n\t\tplayer.move()\r\n\t\tif (world[player.coord.y][player.coord.x] === \"s\") {\r\n\t\t\twhile (stage.children[0]) {\r\n\t\t\t\tstage.removeChild(stage.children[0]);\r\n\t\t\t}\r\n\t\t\tbuild(worlds[worlds.indexOf(world) + 1]);\r\n\t\t}\r\n\t\tenemies.forEach(function(val) {\r\n\t\t\tif (val.coord.x === player.coord.x && val.coord.y === player.coord.y && val.valid !== false) {\r\n\t\t\t\tloop.stop();\r\n\t\t\t\tlet battle = new Encounter()\r\n\t\t\t\tbattle.start(player, val)\r\n\t\t\t}\r\n\t\t})\r\n\t\tapp.render(map)\r\n\t})\r\n}\n\n\n// WEBPACK FOOTER //\n// ./active/dungeon/scripts/index.js","module.exports = new function () {\r\n    var a = this;\r\n    this.renderer = \"\";\r\n    this.canvas = function (width, height) {\r\n        var canvas = document.createElement('canvas');\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        var ctx = canvas.getContext(\"2d\");\r\n        return {\r\n            \"canvas\": canvas,\r\n            \"ctx\": ctx\r\n        };\r\n    };\r\n    this.rectangle = function (width, height, color) {\r\n        var b = a.canvas(width, height);\r\n        b.ctx.fillStyle = color;\r\n        b.ctx.fillRect(0, 0, width, height);\r\n        return PIXI.Texture.fromCanvas(b.canvas);\r\n    };\r\n    this.circle = function (radius, color) {\r\n        var b = a.canvas(radius * 2, radius * 2);\r\n        b.ctx.fillStyle = color;\r\n        b.ctx.beginPath();\r\n        b.ctx.arc(radius, radius, radius, 0, 2 * Math.PI);\r\n        b.ctx.fill();\r\n        return PIXI.Texture.fromCanvas(b.canvas);\r\n    };\r\n}();\r\n\n\n\n// WEBPACK FOOTER //\n// ./active/dungeon/scripts/drawing/shapes.js","export default new function() {\r\n    var a = this;\r\n    this.map = [];\r\n    this.tethers = [];\r\n    this.listen = function() {\r\n        document.onkeydown = function(e) {\r\n            e = e || window.event;\r\n            e = e.which || e.keyCode || 0;\r\n            if (a.map.indexOf(e) == -1) {\r\n                a.map.push(e);\r\n            }\r\n            a.tethers.forEach(function(tether, index) {\r\n                if (tether.type == \"down\") {\r\n                    if (e === tether.key) {\r\n                        tether.func();\r\n                        if (!tether.perma) a.tethers.splice(index, 1);\r\n                    }\r\n                }\r\n            });\r\n        };\r\n        document.onkeyup = function(e) {\r\n            e = e || window.event;\r\n            e = e.which || e.keyCode || 0;\r\n                // use e.keyCode\r\n            if (a.map.indexOf(e) != -1) {\r\n                a.map.splice(a.map.indexOf(e), 1);\r\n            }\r\n            a.tethers.forEach(function(tether, index) {\r\n                if (tether.type == \"up\") {\r\n                    if (e === tether.key) {\r\n                        tether.func();\r\n                        if (!tether.perma) a.tethers.splice(index, 1);\r\n                    }\r\n                }\r\n            });\r\n        };\r\n    };\r\n    this.check = function(key, callback, not) {\r\n        if (typeof key != \"object\") {\r\n            key = [key];\r\n        }\r\n        for (var i = 0; i < key.length; i++) {\r\n            if (a.map.indexOf(key[i]) != -1) {\r\n                callback();\r\n                i = key.length;\r\n                return true;\r\n            }\r\n        }\r\n        if (not !== undefined) {\r\n            not();\r\n        }\r\n        return false;\r\n    };\r\n    this.waitUp = function(key, func, perma) {\r\n        if (perma === undefined) {\r\n            perma = false;\r\n        }\r\n        a.tethers.push({\r\n            \"key\": key,\r\n            \"func\": func,\r\n            \"type\": \"up\",\r\n            \"perma\": perma\r\n        });\r\n    };\r\n    this.waitDown = function(key, func, perma,strictless) {\r\n        if (perma === undefined) {\r\n            perma = false;\r\n        }\r\n        if(a.tethers.every(function(val){\r\n            return key !== val.key\r\n        }) || strictless){\r\n            console.log(\"veritable beans\")\r\n        a.tethers.push({\r\n            \"key\": key,\r\n            \"func\": func,\r\n            \"type\": \"down\",\r\n            \"perma\": perma\r\n        });\r\n        }\r\n    };\r\n}();\r\n\n\n\n// WEBPACK FOOTER //\n// ./active/dungeon/scripts/utilities/keypress.js","import key from \"./../utilities/keypress.js\";\r\nlet runeMap = {\r\n    \"Q\":81,\r\n    \"A\":65,\r\n    \"R\":82,\r\n    \"W\":87,\r\n    \"F\":70\r\n}\r\nexport default class{\r\n    constructor(name,runes,effect,duration,amount,cost,anim,animFrames){\r\n        this.name = name\r\n        this.runes = runes\r\n        this.effect = effect\r\n        this.duration = duration\r\n        this.amount = amount\r\n        this.cost = cost\r\n        this.anim = anim;\r\n        this.animFrames = animFrames;\r\n    }\r\n    cast(){\r\n        this.scroll = \"\"\r\n        for(let i = 0; i < this.amount;i++){\r\n            this.scroll += this.runes[Math.floor(Math.random()*this.runes.length)]\r\n        }\r\n    }\r\n    initiate(){\r\n        let started = false;\r\n        document.addEventListener('keydown', function(){started = true}, false);\r\n        key.tethers = []\r\n        let spell = this;\r\n        let scrollContainer = new PIXI.Container();\r\n        this.cast();\r\n        let duration = this.duration * 60;\r\n        let lock = 0;\r\n        let index = 0;\r\n        spell.scroll.split(\"\").forEach(function(val,index){\r\n            let rune = new PIXI.Text(val,{fontFamily : 'Mono', fontSize: 24, fill : 0xffffff});\r\n            rune.x = (index % 20) * 32 + 24;\r\n            rune.y = 64 * 6 + Math.floor(index/20) * 32 + 32;\r\n            scrollContainer.addChild(rune);\r\n        })\r\n        battle.addChild(scrollContainer);\r\n        return function(cb,end,quinter,enemy,player){\r\n            if(quinter === true){\r\n                battle.removeChild(scrollContainer);\r\n            }\r\n            if(duration <= 0){\r\n                battle.removeChild(scrollContainer);\r\n                end();\r\n                return 0;\r\n            } else{\r\n                if(started){\r\n                    duration--;\r\n                }\r\n                if(lock <= 0){\r\n                        for(let i = 0;i < spell.runes.length;i++){\r\n                            key.waitDown(runeMap[spell.runes[i]],function(){\r\n                            if(spell.runes[i] === spell.scroll[index]){\r\n                                scrollContainer.children[index].style.fill = 0x00ff00\r\n                                index += 1;\r\n                                //Success!\r\n                                i = spell.runes.length\r\n                                spell.effect(enemy,player)\r\n                                if(index === spell.scroll.length){\r\n                                    duration = 0;\r\n                                }\r\n                                cb();\r\n                                return 1;\r\n                            } else{\r\n                                lock = spell.duration * 60 / 10\r\n                                return 0;\r\n                            }\r\n                        })\r\n                        }\r\n                }\r\n                else{\r\n                    lock--;\r\n                }\r\n            }\r\n            return 0;\r\n        }\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./active/dungeon/scripts/misc/spell.js","export default class{\r\n    constructor(health,attack,big,small,extra){\r\n        this.health = health\r\n        this.attack = attack\r\n        this.bigTex = big\r\n        this.smallTex = small\r\n        this.sprite = new PIXI.Sprite(this.smallTex);\r\n        this.sprite.anchor.x = 0.5;\r\n        this.sprite.x = 32;\r\n        if(extra){\r\n            this.dialogue = extra.dialogue;\r\n            this.block = extra.block || false;\r\n        }\r\n        this.maxHealth = health;\r\n        this.health = health;\r\n        this.coord = {\"x\":0,\"y\":0}\r\n        map.addChild(this.sprite)\r\n    }\r\n    get x(){\r\n        return this.sprite.x\r\n    }\r\n    set x(x){\r\n        this.sprite.x = x\r\n    }\r\n    get y(){\r\n        return this.sprite.y\r\n    }\r\n    set y(y){\r\n        this.sprite.y = y\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./active/dungeon/scripts/misc/enemy.js","import shapes from \"./../drawing/shapes.js\";\r\nimport Spell from \"./spell.js\";\r\nexport default class{\r\n    constructor(){\r\n        this.sprite = new PIXI.Sprite(PIXI.loader.resources[\"./assets/steve-stand.png\"].texture);\r\n        this.counter = 0\r\n        this.mode = \"\"\r\n        this.sprite.anchor.x = 0.5;\r\n        this.coord = {\"x\":0,\"y\":0};\r\n        this.maxHealth = 50;\r\n        this.health = 50;\r\n        this.maxMana = 50;\r\n        this.mana = 50;\r\n        this.spells = [\r\n            new Spell(\"Attack\",[\"A\"],function(e,p){e.health-=10},5,3,5,\"slash\",14),\r\n            new Spell(\"Multiattack\",[\"Q\",\"A\"],function(e,p){e.health -= 5;},5,25,10,\"slash\",14),\r\n            new Spell(\"Life Steal\",[\"R\",\"A\"],function(e,p){e.health -= 5; p.health += 5;},6,30,20,\"slash\",14),\r\n            new Spell(\"Fire Strike\",[\"Q\",\"A\",\"F\"],function(e,p,t){e.health -= 10; t = \"flame\";},8,30,20,\"flame\",15),\r\n            new Spell(\"Aqua Heal\",[\"Q\",\"R\",\"W\"],function(e,p){p += 5},3,5,25,\"none\",0),\r\n            new Spell(\"Scalding Water\",[\"Q\",\"A\",\"W\",\"F\"],function(e){e.health -= 5},15,50,50,\"water\",7)\r\n        ]\r\n    }\r\n    move(){\r\n        let player = this\r\n\r\n        if(player.mode !== \"\"){\r\n            let testcheck = world[player.coord.y + player.mode[1] / 4][player.coord.x + player.mode[0] / 4] === \"1\" || enemies.some(function(enem){\r\n                return player.coord.y + player.mode[1] / 4 === enem.coord.y && player.coord.x + player.mode[0] / 4 === enem.coord.x && enem.block\r\n            }) //||\r\n            //world[player.coord.y + player.mode[1] / 4][player.coord.x + player.mode[0] / 4] === \"z\";\r\n            if(!testcheck){\r\n                tall.sort(function(a,b){\r\n                    return a.y-b.y\r\n                })\r\n                tall.forEach(function(val){\r\n                    map.removeChild(val)\r\n                    map.addChild(val)\r\n                })\r\n                //Begin animation loop\r\n                player.counter += 1;\r\n                if(player.counter % 24 < 8){\r\n                    player.sprite.texture = PIXI.loader.resources[\"./assets/steve-2.png\"].texture;\r\n                } else if(player.counter % 24 < 16){\r\n                    player.sprite.texture = PIXI.loader.resources[\"./assets/steve-stand.png\"].texture;\r\n                }\r\n                else{\r\n                    player.sprite.texture = PIXI.loader.resources[\"./assets/steve.png\"].texture;\r\n                }\r\n                map.x -= player.mode[0] * 2/3;\r\n                map.y -= player.mode[1] * 2/3;\r\n                player.x += player.mode[0] * 2/3;\r\n                player.y += player.mode[1] * 2/3;\r\n\r\n                if(player.counter === 24){\r\n                    player.coord.y += player.mode[1] / 4;\r\n                    player.coord.x += player.mode[0] / 4;\r\n                    player.x = Math.round(player.x);\r\n                    player.y = Math.round(player.y);\r\n                player.mode = \"\"\r\n                if(key.check([87,38,65,37,40,83,68,39],function(){})){\r\n                    player.sprite.texture = PIXI.loader.resources[\"./assets/steve-2.png\"].texture;\r\n                } else{\r\n                    player.sprite.texture = PIXI.loader.resources[\"./assets/steve-stand.png\"].texture;\r\n                }\r\n                }\r\n            } else{\r\n                player.mode = \"\"\r\n                player.sprite.texture = PIXI.loader.resources[\"./assets/steve-stand.png\"].texture;\r\n            }\r\n          }\r\n          key.check([87,38], function() {\r\n            if (player.mode === \"\"){\r\n              //up\r\n              player.mode = [0,-4]\r\n              player.counter = 0\r\n            }\r\n          })\r\n          key.check([65,37], function() {\r\n            if (player.mode === \"\"){\r\n              //left\r\n              player.mode = [-4,0]\r\n              player.counter = 0\r\n              player.sprite.scale.x = 1;\r\n            }\r\n          })\r\n          key.check([83,40], function() {\r\n            if (player.mode === \"\"){\r\n              //down\r\n              player.mode = [0,4]\r\n              player.counter = 0\r\n            }\r\n          })\r\n          key.check([68,39], function() {\r\n            if (player.mode === \"\"){\r\n              //right\r\n              player.mode = [4,0]\r\n              player.counter = 0\r\n              player.sprite.scale.x = -1;\r\n            }\r\n          })\r\n    }\r\n    get x(){\r\n        return this.sprite.x\r\n    }\r\n    set x(x){\r\n        this.sprite.x = x\r\n    }\r\n    get y(){\r\n        return this.sprite.y\r\n    }\r\n    set y(y){\r\n        this.sprite.y = y\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./active/dungeon/scripts/misc/player.js","import shapes from \"./../drawing/shapes.js\";\r\nimport fps from \"./../utilities/fps.js\";\r\nimport statbar from \"./statbar.js\";\r\nimport Animation from \"./../utilities/animate.js\";\r\nimport Dialogue from \"./dialogue\";\r\nexport default class {\r\n\tconstructor() {}\r\n\tstart(player, enemy) {\r\n        console.log(battle.children); \r\n        player.mana = player.maxMana\r\n        //Establish statbars for both the player and the enemy. If the player is allied (NPC) use a pure healthbar\r\n\t\tlet playerHealth = new statbar(player.health, player.maxHealth, PIXI.loader.resources[\"./assets/hpstart.png\"].texture, PIXI.loader.resources[\"./assets/hpbodyfill.png\"].texture, PIXI.loader.resources[\"./assets/goldbody.png\"].texture, PIXI.loader.resources[\"./assets/goldend.png\"].texture)\r\n\t\tlet playerMana = new statbar(player.mana, player.maxMana, PIXI.loader.resources[\"./assets/mpstart.png\"].texture, PIXI.loader.resources[\"./assets/mpbodyfill.png\"].texture, PIXI.loader.resources[\"./assets/goldbody.png\"].texture, PIXI.loader.resources[\"./assets/goldend.png\"].texture)\r\n\t\tif (enemy.pure) {\r\n\t\t\tvar enemyHealth = new statbar(enemy.health, enemy.maxHealth, PIXI.loader.resources[\"./assets/hpblue.png\"].texture, PIXI.loader.resources[\"./assets/mpbodyfill.png\"].texture, PIXI.loader.resources[\"./assets/goldbody.png\"].texture, PIXI.loader.resources[\"./assets/goldend.png\"].texture)\r\n\t\t} else {\r\n\t\t\tvar enemyHealth = new statbar(enemy.health, enemy.maxHealth, PIXI.loader.resources[\"./assets/evstart.png\"].texture, PIXI.loader.resources[\"./assets/evbodyfill.png\"].texture, PIXI.loader.resources[\"./assets/evbody.png\"].texture, PIXI.loader.resources[\"./assets/evend.png\"].texture)\r\n\t\t}\r\n\t\tplayerMana.sprite.y = 32;\r\n\t\tplayerHealth.sprite.y = 318;\r\n\t\tplayerMana.sprite.y = 350;\r\n\t\tenemyHealth.sprite.x = 698 - enemyHealth.sprite.width;\r\n\t\tbattle.addChild(playerHealth.sprite);\r\n\t\tbattle.addChild(playerMana.sprite);\r\n        battle.addChild(enemyHealth.sprite);\r\n        //other various global declarations\r\n        let obj = this;\r\n\t\tlet active = \"\";\r\n        let casting = function() {};\r\n        let spellContainer = new PIXI.Container();\r\n\t\twindow.animate = new Animation();\r\n\r\n\t\tfunction turn() {\r\n\t\t\tanimate.addBreak(function(cb) { //Bring up spell casting menu and handle spellcasting. TODO: Add animation syntax.\r\n\t\t\t\t\tplayer.spells.forEach(function(spl, index) {\r\n                        //Declare various pixijs elements and add them to the stage, position them\r\n\t\t\t\t\t\tlet spellHold = new PIXI.Container();\r\n\t\t\t\t\t\tlet spell = new PIXI.Sprite(shapes.rectangle(160, 64, \"#ddd\"))\r\n\t\t\t\t\t\tlet text = new PIXI.Text(spl.name, {\r\n\t\t\t\t\t\t\tfontFamily: 'Mono',\r\n\t\t\t\t\t\t\tfontSize: 16,\r\n\t\t\t\t\t\t\tfill: 0x000,\r\n\t\t\t\t\t\t\twordWrap: true,\r\n\t\t\t\t\t\t\twordWrapWidth: 140\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\ttext.x = 10;\r\n\t\t\t\t\t\ttext.y = 10;\r\n\t\t\t\t\t\tspellHold.addChild(spell);\r\n\t\t\t\t\t\tspellHold.addChild(text);\r\n\t\t\t\t\t\tspellHold.x = (index % 3) * 248 + 24;\r\n\t\t\t\t\t\tspell.buttonMode = true;\r\n\t\t\t\t\t\tspell.interactive = true;\r\n                        spellHold.y = 410 + Math.floor(index / 3) * 72;\r\n                        //Whenever a spell is clicked spend mana / hp and initiate spell power\r\n\t\t\t\t\t\tspell.on(\"click\", function() {\r\n\t\t\t\t\t\t\tactive = spl;\r\n\t\t\t\t\t\t\tif (player.mana < spl.cost) {\r\n\t\t\t\t\t\t\t\tplayer.health -= Math.ceil((spl.cost - player.mana) / 5)\r\n\t\t\t\t\t\t\t\tplayer.mana = 0;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tplayer.mana -= spl.cost;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayerHealth.fill.width = player.health;\r\n\t\t\t\t\t\t\tif (player.health <= 0) {\r\n\t\t\t\t\t\t\t\tplayerHealth.fill.width = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayerMana.fill.width = player.mana\r\n\t\t\t\t\t\t\tif (player.mana <= 0) {\r\n\t\t\t\t\t\t\t\tplayerMana.fill.width = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcasting = spl.initiate();\r\n\t\t\t\t\t\t\tcb()\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tspellContainer.addChild(spellHold)\r\n\t\t\t\t\t})\r\n\t\t\t\t\tbattle.addChild(spellContainer);\r\n\t\t\t\t})\r\n\t\t\t\t.addBreak(function(cb) { //Get rid of spellcasting menu\r\n\t\t\t\t\tspellContainer.children = \"\"\r\n\t\t\t\t\tspellContainer = new PIXI.Container();\r\n\t\t\t\t\tcb()\r\n\t\t\t\t})\r\n\t\t\t\t.addLoopingBreak(function(cb) { //Handle spellcasting and spellcasting animations\r\n\t\t\t\t\tcasting(function() {\r\n\t\t\t\t\t\tif (enemy.health <= 0) {\r\n\t\t\t\t\t\t\tcasting(function() {}, function() {}, true);\r\n\t\t\t\t\t\t\tenemyHealth.fill.width = 0;\r\n\t\t\t\t\t\t\tcb()\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tenemyHealth.fill.width = enemy.health\r\n\t\t\t\t\t\t\tlet slash = new PIXI.Sprite(PIXI.loader.resources[\"./assets/\" + active.anim + \"/1.png\"].texture);\r\n\t\t\t\t\t\t\tslash.x = 702 / 2 + Math.random() * 100 - 50;\r\n\t\t\t\t\t\t\tslash.anchor.x = 0.5;\r\n\t\t\t\t\t\t\tslash.y = 64 + enemy.sprite.height / 2 + Math.random() * 100 - 50;\r\n\t\t\t\t\t\t\tslash.anchor.y = 0.5;\r\n\t\t\t\t\t\t\tbattle.addChild(slash);\r\n\t\t\t\t\t\t\tanimate.addAsync(active.animFrames, function(x) {\r\n\t\t\t\t\t\t\t\tslash.texture = PIXI.loader.resources[\"./assets/\" + active.anim + \"/\" + x + \".png\"].texture;\r\n\t\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\t\tbattle.removeChild(slash);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, cb, false, enemy, player)\r\n\t\t\t\t})\r\n\t\t\t\t.addLoopingBreak(function(cb) { //If enemy is dying, end the loop.\r\n\t\t\t\t\tif (enemy.health <= 0) {\r\n\t\t\t\t\t\tenemy.sprite.alpha -= 0.05;\r\n\t\t\t\t\t\tif (enemy.sprite.alpha <= 0) {\r\n\t\t\t\t\t\t\tconsole.log(\"end encounter, give gold\");\r\n\t\t\t\t\t\t\tbattle.alpha = 1;\r\n\t\t\t\t\t\t\tmap.alpha = 0;\r\n\t\t\t\t\t\t\tanimate.addFrame(20, function() {\r\n\t\t\t\t\t\t\t\t\tbattle.alpha -= 0.05;\r\n\t\t\t\t\t\t\t\t\tmap.alpha += 0.05;\r\n\t\t\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\t\t\tstage.addChild(map);\r\n\t\t\t\t\t\t\t\t\tstage.removeChild(battle);\r\n\t\t\t\t\t\t\t\t\tmap.removeChild(enemy);\r\n                                    enemies.splice(enemies.indexOf(enemy), 1)\r\n                                    battle.children.forEach(function(child) {\r\n\t\t\t\t\t\t\t\t\t\tbattle.removeChild(child);\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\tloop.start();\r\n\t\t\t\t\t\t\t\t\tobj.timer.stop();\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.addBreak();\r\n\t\t\t\t\t\t\tcb()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcb()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.addBreak(function(cb) {\r\n\t\t\t\t\tplayer.health -= enemy.attack();\r\n\t\t\t\t\tplayerHealth.fill.width = player.health;\r\n\t\t\t\t\tif (player.health <= 0) {\r\n\t\t\t\t\t\tcasting(function() {}, function() {}, true);\r\n\r\n\t\t\t\t\t\tfunction end() {\r\n\t\t\t\t\t\t\tenemy.x = enemy.coord.x * 64 + 32;\r\n\t\t\t\t\t\t\tenemy.y = enemy.coord.y * 64 - 78;\r\n\t\t\t\t\t\t\tenemy.valid = false;\r\n\t\t\t\t\t\t\tstage.addChild(map);\r\n\t\t\t\t\t\t\tstage.removeChild(battle);\r\n\t\t\t\t\t\t\tmap.alpha = 1;\r\n\t\t\t\t\t\t\tif (!enemy.pure) {\r\n\t\t\t\t\t\t\t\tmap.removeChild(enemy);\r\n\t\t\t\t\t\t\t\tenemies.splice(enemies.indexOf(enemy), 1)\r\n\t\t\t\t\t\t\t} else {\r\n                                map.addChild(enemy.sprite);\r\n                                enemy.block = true;\r\n                            }\r\n                            battle.children.forEach(function(child) {\r\n\t\t\t\t\t\t\t\tbattle.removeChild(child);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tloop.start();\r\n\t\t\t\t\t\t\tobj.timer.stop();\r\n\t\t\t\t\t\t\tcb()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (enemy.dialogue) {\r\n\t\t\t\t\t\t\tnew Dialogue(enemy.dialogue.end, end);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tend();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tturn()\r\n\t\t\t\t\t\tcb()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t}\r\n\t\t//\r\n\t\tanimate.addFrame(20, function() {\r\n\t\t\t\tmap.alpha -= 0.05\r\n\t\t\t})\r\n\t\t\t.addBreak(function(cb) { //Initialize the battle with a frameless frame\r\n\t\t\t\tstage.removeChild(map);\r\n\t\t\t\tstage.addChild(battle);\r\n\t\t\t\tmap.removeChild(enemy.sprite);\r\n\t\t\t\tbattle.addChild(enemy.sprite);\r\n\t\t\t\tbattle.alpha = 0;\r\n\t\t\t\tenemy.sprite.texture = enemy.bigTex\r\n\t\t\t\tenemy.x = 702 / 2;\r\n\t\t\t\tenemy.y = 64;\r\n\t\t\t\tobj.counter += 1;\r\n\t\t\t\tlet wrapper = new PIXI.Sprite(PIXI.loader.resources[\"./assets/dialoguebox.png\"].texture);\r\n\t\t\t\twrapper.y = 384;\r\n\t\t\t\tbattle.addChild(wrapper);\r\n\t\t\t\tcb()\r\n\t\t\t})\r\n\t\t\t.addFrame(20, function() { //Fade in the battle\r\n\t\t\t\tbattle.alpha += 0.05;\r\n\t\t\t})\r\n\t\tanimate.addBreak(function(cb) { //Check if there is dialogue for the encounter, otherwise skip\r\n\t\t\tif (enemy.dialogue) {\r\n\t\t\t\tnew Dialogue(enemy.dialogue.start, cb)\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(\"JESUS\")\r\n\t\t\t\tcb()\r\n\t\t\t}\r\n\t\t})\r\n\t\tturn()\r\n\t\tobj.timer = new fps(function() {\r\n\t\t\tanimate.tick()\r\n\t\t})\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./active/dungeon/scripts/misc/encounter.js","module.exports = function(cb) {\r\n    this.going = true;\r\n    this.start = function() {\r\n        this.going = true;\r\n        requestAnimationFrame(draw);\r\n    };\r\n    this.resume = this.start;\r\n    this.stop = function() {\r\n        this.going = false;\r\n    };\r\n    this.pause = this.stop;\r\n    this.toggle = function() {\r\n        this.going = !this.going;\r\n    };\r\n    this.restart = function() {\r\n        ct = 0;\r\n    };\r\n    var a = this;\r\n    var ct = 0;\r\n\r\n\r\n    function draw() {\r\n        if (a.going) {\r\n            requestAnimationFrame(draw);\r\n            ct++\r\n            cb(ct,a)\r\n            ct%= 64;\r\n        }\r\n    }\r\n    draw();\r\n    return this;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./active/dungeon/scripts/utilities/fps.js","export default class{\r\n    constructor(fills,max,starts,shades,bodys,ends){\r\n        this.sprite = new PIXI.Container();\r\n        \r\n\r\n        let body = new PIXI.Sprite(bodys)\r\n        body.x = 28;\r\n        body.width = max -2;\r\n        this.sprite.addChild(body);\r\n\r\n        this.fill = new PIXI.Sprite(shades)\r\n        this.fill.x = 28;\r\n        this.fill.y = 10;\r\n        this.fill.width = fills;\r\n        this.sprite.addChild(this.fill);\r\n\r\n        let end = new PIXI.Sprite(ends)\r\n        end.x = max - 6 + 30;\r\n        this.sprite.addChild(end);\r\n\r\n        this.sprite.addChild(new PIXI.Sprite(starts))\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./active/dungeon/scripts/misc/statbar.js","class Frame {\r\n\tconstructor(duration, func, callback,type) {\r\n\t\tthis.progress = 0;\r\n\t\tthis.duration = duration;\r\n\t\tthis.func = func;\r\n\t\tthis.callback = callback;\r\n\t\tthis.type = type\r\n\t}\r\n\ttick(animation) {\r\n\t\tlet a = this;\r\n\t\tif((this.duration === 0 && this.progress === 0) || this.duration === -1){\r\n\t\t\tconsole.log(this.type);\r\n\t\t\tthis.progress++;\r\n\t\t\t//don't pass progress, pass callback\r\n\t\t\tthis.func(\r\n\t\t\t\tfunction(){\r\n\t\t\t\t\tanimation.frames.shift();\r\n\t\t\t\t\tanimation.tick();\r\n\t\t\t\t});\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse if (this.progress < this.duration) {\r\n\t\t\tconsole.log('hey')\r\n\t\t\tthis.progress++;\r\n\t\t\t//Passes the progress based on 0\r\n\t\t\tthis.func(this.progress,a);\r\n\t\t\treturn true;\r\n\t\t} else if(this.duration === 0){\r\n\t\t\treturn true;\r\n\t\t} else{\r\n\t\t\tif (typeof this.callback == \"function\") {\r\n\t\t\t\tthis.callback();\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n}\r\nexport default class{\r\n\tconstructor() {\r\n\t\tthis.frames = [];\r\n\t\tthis.async = [];\r\n\t}\r\n\t/*\r\n\taddFrame\r\n\t  - name:\r\n\t    * Set to a name to add to a specific chain of animations\r\n\t\t* Leave blank (null, 0, \"\", false, etc.) to be executed in the loop until completion as soon as declared.\r\n\t  - duration:\r\n\t    * How many ticks the animation will last for\r\n\t  - func:\r\n\t    * The code to be run in the animation sequence\r\n\t  - callback (optional):\r\n\t    * A function to be run after the completion of the animation\r\n\t*/\r\n\taddFrame(duration, func, callback) {\r\n\t\tfunc = func || function(){}\r\n\t\tcallback = callback || function(){}\r\n\t\tthis.frames.push(new Frame(duration, func, callback,\"sync\"));\r\n\t\treturn this;\r\n\t}\r\n\taddBreak(func,callback){\r\n\t\tthis.addFrame(0,func,callback);\r\n\t\treturn this;\r\n\t}\r\n\taddLoopingBreak(func,callback){\r\n\t\tthis.addFrame(-1,func,callback);\r\n\t\treturn this;\r\n\t}\r\n\taddAsync(duration,func,callback){\r\n\t\tthis.async.push(new Frame(duration, func, callback,\"async\"));\r\n\t\treturn this;\r\n\t}\r\n\ttick() {\r\n\t\tlet a = this;\r\n\t\t//Sloppy way to get every synchronous way, how fun.\r\n\t\tif (!a.frames[0].tick(a)) {\r\n\t\t\ta.frames.shift();\r\n\t\t}\r\n\t\tfor(let i = this.async.length - 1;i >= 0;i--){\r\n\t\t\tif (!this.async[i].tick(a)) {\r\n\t\t\t\tthis.async.splice(i,1)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./active/dungeon/scripts/utilities/animate.js","export default class {\r\n\tconstructor(text, cb) {\r\n\t\tlet dialogueList = text\r\n\t\tlet txt = new PIXI.Text(\"\", {\r\n\t\t\tfontFamily: 'Mono',\r\n\t\t\tfontSize: 24,\r\n\t\t\tfill: 0xffffff,\r\n\t\t\twordWrap: true,\r\n\t\t\twordWrapWidth: 666\r\n\t\t});\r\n\t\ttxt.x = 26;\r\n\t\ttxt.y = 412;\r\n\t\tbattle.addChild(txt);\r\n\t\tlet dialogue = -1;\r\n\r\n\t\tfunction txtAnim(text, callback) {\r\n\t\t\tlet total = \"\";\r\n\t\t\tlet dia;\r\n\t\t\tif (text.indexOf(\":\") === -1) {\r\n\t\t\t\tdia = [\"\", text]\r\n\t\t\t} else {\r\n\t\t\t\tdia = text.split(\":\");\r\n\t\t\t}\r\n\t\t\tanimate.addAsync(dia[1].length * 1 + 1, function(x, a) {\r\n\t\t\t\tif (dia[1][x] === \" \") {\r\n\t\t\t\t\ta.tick(a)\r\n\t\t\t\t} else if (x % 1 === 0) {\r\n\t\t\t\t\ttxt.text = dia[0] + \":\" + dia[1].substring(0, x / 1);\r\n\t\t\t\t}\r\n\t\t\t}, callback)\r\n\t\t}\r\n\r\n\t\tfunction awaitEnter() {\r\n            dialogue++;\r\n            if (dialogue === dialogueList.length) {\r\n                animate.async = []\r\n                battle.removeChild(txt);\r\n                console.log(\"JESUS\")\r\n                cb()\r\n            } else{\r\n                txtAnim(dialogueList[dialogue], function() {\r\n                        key.waitDown(13, awaitEnter, false, true)\r\n                })\r\n            }\r\n\t\t}\r\n\t\tawaitEnter()\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./active/dungeon/scripts/misc/dialogue.js"],"sourceRoot":""}